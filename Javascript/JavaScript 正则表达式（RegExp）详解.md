# JavaScript 正则表达式（RegExp）详解

## 一、正则表达式基础

### 1. 概念

正则表达式（Regular Expression）是一种用**单个字符串**描述、匹配一系列符合特定句法规则的字符串的**搜索模式**，主要用于文本的**搜索**和**替换**。

### 2. 语法结构

JavaScript 中，正则表达式的语法格式为：

```javascript
/正则表达式主体/修饰符(可选)
```

- **主体**：描述匹配的模式（如 `runoob`）。
- **修饰符**：用于修改匹配规则（可选，如 `i`、`g`、`m`）。

**示例**：
`/runoob/i` 中，`runoob` 是主体，`i` 是修饰符（表示不区分大小写匹配）。

## 二、正则表达式与字符串方法

正则表达式常与 JavaScript 字符串的 `search()` 和 `replace()` 方法结合使用：

### 1. `search()` 方法

- **功能**：检索字符串中与正则表达式匹配的子串，返回其**起始位置**（若未找到则返回 `-1`）。

- 示例：

  ```javascript
  let str = "Visit Runoob!";
  let n = str.search(/runoob/i); // 返回 6（不区分大小写匹配 "Runoob"）
  ```

### 2. `replace()` 方法

- **功能**：替换字符串中与正则表达式匹配的子串，返回替换后的新字符串。

- 示例：

  ```javascript
  let str = "Visit Microsoft!";
  let res = str.replace(/microsoft/i, "Runoob"); // 返回 "Visit Runoob!"（替换匹配项）
  ```

## 三、正则表达式修饰符

修饰符用于调整匹配方式，可组合使用（如 `/pattern/ig`）：

| 修饰符 | 描述                                                         |
| ------ | ------------------------------------------------------------ |
| `i`    | 不区分大小写匹配（如 `/abc/i` 匹配 "ABC"、"abc"）            |
| `g`    | 全局匹配（查找所有匹配项，而非找到第一个就停止）             |
| `m`    | 多行匹配（使 `^` 和 `$` 匹配每行的开头和结尾，而非整个字符串） |

**示例**：

```javascript
let str = "Hello hello HELLO";
// 全局且不区分大小写匹配 "hello"
str.match(/hello/ig); // 返回 ["Hello", "hello", "HELLO"]
```

## 四、正则表达式模式

模式是正则表达式的核心，用于定义匹配规则，常见模式包括：

### 1. 字符类

- `[abc]`：匹配方括号中的任意一个字符（如匹配 "a"、"b" 或 "c"）。
- `[^abc]`：匹配**不在**方括号中的任意字符。
- `[0-9]`：匹配任意数字（等价于 `\d`）。
- `[a-z]`：匹配任意小写字母；`[A-Z]` 匹配任意大写字母。

### 2. 元字符（特殊含义字符）

元字符需转义（加 `\`）才能匹配其本身，常用元字符：

| 元字符 | 描述                                                  |
| ------ | ----------------------------------------------------- |
| `.`    | 匹配任意单个字符（除换行符 `\n`）                     |
| `\d`   | 匹配数字（等价于 `[0-9]`）                            |
| `\D`   | 匹配非数字（等价于 `[^0-9]`）                         |
| `\s`   | 匹配空白字符（空格、制表符 `\t`、换行符 `\n` 等）     |
| `\S`   | 匹配非空白字符                                        |
| `\w`   | 匹配字母、数字、下划线（等价于 `[A-Za-z0-9_]`）       |
| `\W`   | 匹配非字母、数字、下划线                              |
| `^`    | 匹配字符串的开始位置（若用 `m` 修饰符，匹配每行开头） |
| `$`    | 匹配字符串的结束位置（若用 `m` 修饰符，匹配每行结尾） |
| `\b`   | 匹配单词边界（如 `\bword\b` 匹配独立的 "word"）       |

### 3. 量词（匹配次数）

| 量词     | 描述                                                       |
| -------- | ---------------------------------------------------------- |
| `n+`     | 匹配**至少一个** `n`（如 `o+` 匹配 "oo"、"o"）             |
| `n*`     | 匹配**零个或多个** `n`（如 `o*` 匹配 ""、"o"、"oo"）       |
| `n?`     | 匹配**零个或一个** `n`（如 `o?` 匹配 ""或"o"）             |
| `n{X}`   | 匹配**恰好 X 个** `n`（如 `o{2}` 匹配 "oo"）               |
| `n{X,Y}` | 匹配**X 到 Y 个** `n`（如 `o{1,3}` 匹配 "o"、"oo"、"ooo"） |
| `n{X,}`  | 匹配**至少 X 个** `n`（如 `o{2,}` 匹配 "oo"、"ooo" 等）    |
| `n$`     | 匹配以 `n` 结尾的字符串（如 `world$` 匹配 "hello world"）  |
| `^n`     | 匹配以 `n` 开头的字符串（如 `^hello` 匹配 "hello world"）  |
| `?=n`    | 正向预查：匹配后面紧跟 `n` 的字符串（如 `Windows (?=95     |
| `?!n`    | 负向预查：匹配后面不紧跟 `n` 的字符串                      |

## 五、RegExp 对象

除直接使用正则表达式字面量（`/pattern/`）外，还可通过 `RegExp` 构造函数创建正则对象：

```javascript
let regexp = new RegExp("runoob", "i"); // 等价于 /runoob/i
```

### 1. `test()` 方法

- **功能**：检测字符串是否匹配正则表达式，返回 `true` 或 `false`。

- 示例：

  ```javascript
  let regexp = /e/;
  regexp.test("The best things in life are free!"); // 返回 true（存在 "e"）
  ```

### 2. `exec()` 方法

- **功能**：检索字符串中与正则表达式匹配的结果，返回包含匹配信息的数组（未找到则返回 `null`）。

- 示例：

  ```javascript
  let regexp = /hello/;
  let result = regexp.exec("hello world");
  // result 为 ["hello", index: 0, input: "hello world", groups: undefined]
  ```

## 六、总结

- 正则表达式是处理文本的强大工具，核心是通过**模式**和**修饰符**定义匹配规则。
- 常用场景：字符串搜索（`search()`）、替换（`replace()`）、验证（如邮箱、手机号格式）。
- `RegExp` 对象的 `test()` 和 `exec()` 方法是正则匹配的核心工具。
- 学习重点：掌握修饰符、元字符、量词的组合使用，通过实际场景练习（如表单验证）加深理解。